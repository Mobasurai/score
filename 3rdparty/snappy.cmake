if(SCORE_USE_SYSTEM_LIBRARIES)
  find_package(Snappy GLOBAL CONFIG)
else()
  set(SNAPPY_BUILD_TESTS OFF)
  set(SNAPPY_BUILD_BENCHMARKS OFF)
  set(SNAPPY_INSTALL OFF)
  set(SNAPPY_BUILD_TESTS OFF CACHE "" INTERNAL)
  set(SNAPPY_BUILD_BENCHMARKS OFF CACHE "" INTERNAL)
  set(SNAPPY_INSTALL OFF CACHE "" INTERNAL)

  set(old_BUILD_SHARED_LIBS ${BUILD_SHARED_LIBS})
  set(BUILD_SHARED_LIBS OFF)

  add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/3rdparty/snappy")

  set(BUILD_SHARED_LIBS ${old_BUILD_SHARED_LIBS})
endif()
